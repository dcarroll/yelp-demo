<template>
    <!-- <aura:component controller="YelpDemoController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:hasSObjectName" access="global"> -->

    <!-- <aura:handler name="change" value="{!v.location}" action="{!c.updateSearch}" />
    <aura:handler name="change" value="{!v.searchTerm}" action="{!c.updateSearch}" />
    <aura:handler name="yelpDataFound" event="c:dataRetrieved" action="{!c.renderYelpData}" /> -->

    <!--
    <div class="slds-box small" id="main">
        <slot name="main">
            <div class="panel panel--visible " id="panelList">
                <header class="panel__header">
                    <h2 class="slds-text-heading_small slds-m-bottom_small">In the Neighborhood</h2>
                    <div class="slds-form-element">
                        <label class="slds-form-element__label slds-assistive-text" for="searchBox">Search</label>
                        <lightning-input value={searchTerm} onkeyup={updateSearch} label="" placeholder="Search for..." id="searchTerm"></lightning-input>
                    </div>
                </header>
                <p class="slds-hide" id="warning">
                    <slot name="warning">{errorMessage}</slot>
                </p>
                <div class="slds-scrollable_y scroll-container" id="scrollableArea">
                    <slot name="scrollableArea">
                        <ul class="slds-list_vertical slds-has-dividers_top-space">
                            <li class=slds-list__item>
                                <div>{errorMessage}</div>
                            </li>
                            <template for:each={restaurantList} for:item="item" for:index="i">
                                <li class=slds-list__item onclick={showDetails} key={item.id}>
                                    <h3 class="slds-text-heading_small slds-m-bottom_x-small">{item.name}</h3>
                                    <img src={item.ratingImg} alt="" class="ratingStars"></img>
                                    <div class="slds-hide slds-m-top_medium" data-details={i}>
                                        <ul class="slds-list_vertical">
                                            <li class="slds-list__item">{item.address}</li>
                                            <li class="slds-list__item">{item.city}, {item.state}</li>
                                            <li class="slds-list__item">{item.phone}</li>
                                        </ul>
                                        <div class="slds-media slds-m-top_medium">
                                            <div class="slds-media__figure">
                                                <img src={item.image} class="slds-avatar_large slds-avatar_circle" alt="Placeholder" />
                                            </div>
                                            <div class="slds-media__body">
                                                <p>{item.review}</p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </template>
                        </ul>
                    </slot>
                </div>
            </div>
            <div class="panel panel--stageRight" id="panelDetails">
                <a href="" class="backbutton slds-text-heading_small" id="backButton" onclick={backButton}>&lt;</a>
                <h2 class="slds-text-heading_small slds-m-bottom_small">Details</h2>
                <div class="slds-scrollable_y scroll-container details">
                    <div id="map" class="map"></div>
                    <h3 class="slds-text-heading_small slds-m-top_medium" id="itemName">{itemName}</h3>
                    <ul class="slds-list_vertical">
                        <li class="slds-list__item">{address}</li>
                        <li class="slds-list__item">{city}, {state}</li>
                        <li class="slds-list__item">{phone}</li>
                    </ul>
                    <div class="slds-media slds-m-top_medium">
                        <div class="slds-media__figure">
                            <img src={image} class="slds-avatar_large slds-avatar_circle" alt="Placeholder" />
                        </div>
                        <div class="slds-media__body">
                            <p>{review}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-spinner_container" id="spinner">
                <div if:false={isLoaded} class="slds-is-relative">
                    <lightning-spinner alternative-text="Loading...">
                    </lightning-spinner>
                </div>
            </div>
        </slot>
    </div>
-->

    <!--  THIS IS THE SECOND VERSION OF THE PAGE -->

    <lightning-button name="toast" label="Show Toast" onclick={handleShowToast}></lightning-button>

    <div id="main" class="slds-box small">
        <div class="slds-grid slds-has-coordinates">
            <div class="slds-map_container slds-scrollable_y">
                <div class="slds-coordinates">
                    <div class="slds-coordinates__header">
                        <h2 class="slds-coordinates__title">In the Neighborhood ({restaurantList.length})</h2>
                        <div class="slds-form-element">
                            <label class="slds-form-element__label slds-assistive-text" for="searchBox">Search</label>
                            <lightning-input value={searchTerm} onkeyup={updateSearch} label="Search" placeholder="Search for..." id="searchTerm"></lightning-input>
                        </div>
                    </div>
                    <div class="scroll-container small slds-scrollable_y" id="panelList">
                        <slot name="panelList">
                            <div if:false={isLoaded} class="slds-is-not-relative">
                                <lightning-spinner variant="brand" size="large">
                                </lightning-spinner>
                            </div>
                            <ul class="slds-coordinates__list">
                                <template for:each={restaurantList} for:item="item" for:index="i">
                                    <c-yelp_demo_card onitemselected={handleCardNotification} found-item={item} key={item.id}>
                                    </c-yelp_demo_card>
                                </template>
                            </ul>
                        </slot>
                    </div>
                    <div class="panel panel--stageRight" id="panelDetails">
                        <lightning-button variant="brand" label="Close" onclick={handleBackButton}></lightning-button>
                        <lightning-map if:true={showMap} zoom-level=15 map-markers={mapMarkers}></lightning-map>
                        <div class="slds-scrollable_y scroll-container details">

                            <h3 class="slds-text-heading_small slds-m-top_medium" id="itemName">{itemName}</h3>
                            <ul class="slds-list_vertical">
                                <li class="slds-list__item">{address}</li>
                                <li class="slds-list__item">{city}, {state}</li>
                                <li class="slds-list__item">{phone}</li>
                            </ul>
                            <div class="slds-media slds-m-top_medium">
                                <div class="slds-media__figure">
                                    <img src={image} class="slds-avatar_large slds-avatar_circle" alt="Placeholder" />
                                </div>
                                <div class="slds-media__body">
                                    <p>{review}</p>
                                </div>
                            </div>
                        </div>
                    </div>
            
                </div>
            </div>
        </div>
    </div>
</template>
